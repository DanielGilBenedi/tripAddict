{% extends 'base.html.twig' %}

{% block title %}Hello MiCuentaController!{% endblock %}

{% block body %}

<section class="jumbotron text-center">

  <div class="container">
    <h1 class="jumbotron-heading">Mis pedidos</h1>
  </div>

</section>

<table class="table">

    <thead>
        <tr class="table-dark">

            <th scope="col">Número de pedido</th>
            <th scope="col">Fecha</th>
            <th scope="col">Precio total</th>
            <th scope="col"></th>
        </tr>
    </thead>

    <tbody>

        {% for pedido in app.user.pedidos %}

        {% set total=0 %}
        {% for linea in pedido.lineaPedidos %}
        {% set total=total + linea.precio %}

        {% endfor %}

        <tr>

            <td>{{pedido.id}}</td>
            <td>{{pedido.fecha|date('d/m/y')}}</td>
            <td>{{total}}€</td>
            <td></td>

        </tr>

        {% endfor %}

    </tbody>

</table>

{% endblock %}