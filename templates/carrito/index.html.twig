{% extends 'base.html.twig' %}

{% block title %}TripAddict | Carrito{% endblock %}


{% block body %}
    <div class="row">
        <div class="col-md-12 order-md-4 mb-5 mt-5">
            <h2 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted "> Tu carrito </span>                
            </h2>

            {% if carrito|length > 0 %}
                {% set total=0 %}

                <div class=" d-flex flex-row-reverse mb-2 mt-2 ml-auto">
                <span class="badge badge-secondary badge-pill">{{carrito|length}}</span>
                </div>

                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Producto</th>
                            <th scope="col">Unidades</th>
                            <th scope="col">Precio unidad</th>
                            <th scope="col">Subtotal</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for key, elemento in carrito %}

                            {% set subtotal=elemento['producto'].precio * elemento['cantidad'] %}
                            {% set total=subtotal+total %}

                            <tr>

                                <td scope="col"> {{elemento['producto'].nombre}} {{key}}</td>
                                <td scope="col">{{elemento['cantidad']}} </td>
                                <td scope="col">{{elemento['producto'].precio}} €</td>
                                <td scope="col">{{subtotal}} €</td>
                                <td scope="col"><a href="/carrito/delete/{{elemento['producto'].id}}" class='btn btn-danger'><i class="fa fa-trash"></i></a></td>

                            </tr>
                        {% endfor %}
                        <tr>

                                <td scope="col"></td>
                                <td scope="col"></td>
                                <td scope="col"></td>
                                <td scope="col">Total</td>
                                <td scope="col">{{total}} €</td>

                            </tr>
                    </tbody>
                </table>
                <a href='/confirmacionPedido' class='btn-lg mt-4 btn btn-block btn-success'>Realizar Pedido</a>

            {% else %}
                Aun no has realizado ningun pedido    
            {% endif %}   

            
        </div>
        </div>
        {% endblock %}